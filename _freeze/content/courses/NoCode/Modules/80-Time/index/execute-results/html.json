{
  "hash": "6cc630a36209e57654bb7a7b26b07fd4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: <iconify-icon icon=\"fluent-mdl2:hour-glass\" width=\"1.2em\" height=\"1.2em\"></iconify-icon> Time \nsubtitle: \"Time is a Him!\"\ndate: 24-May-2024\ndate-modified: \"2025-03-17\"\norder: 80\nabstract: \"Visualizing Time Series\"\ncategories:\n- Time Variables\n- Time Series\n- Line Chart\n- Candlestick Plot\n- Heatmap\n\n---\n\n\n\n## {{< iconify fe beginner >}} What graphs will we see today?\n\n\n| Variable #1 | Variable #2 | Chart Names | Chart Shape |\n|:--------:|:--------:|:----------:|:-------------:|\n|Quant| None|  Time Series Line Chart | {{< iconify flat-color-icons line-chart size=4x >}}  |\n\n\n## {{< iconify tabler variable >}} What kind of Data Variables will we choose?\n\n::: column-page-inset-right\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper lightable-hover\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> No </th>\n   <th style=\"text-align:left;\"> Pronoun </th>\n   <th style=\"text-align:left;\"> Answer </th>\n   <th style=\"text-align:left;\"> Variable/Scale </th>\n   <th style=\"text-align:left;\"> Example </th>\n   <th style=\"text-align:left;\"> What Operations? </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> How Many / Much / Heavy? Few? Seldom? Often? When? </td>\n   <td style=\"text-align:left;\"> Quantities with Scale.\nDifferences are meaningful, but not products or ratios </td>\n   <td style=\"text-align:left;\"> Quantitative/Interval </td>\n   <td style=\"text-align:left;\"> pH,SAT score(200-800),Credit score(300-850),SAT score(200-800),Year of Starting College </td>\n   <td style=\"text-align:left;\"> Mean,Standard Deviation </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n:::\n\n## {{< iconify icons8 idea >}} Inspiration\n\n::: callout-note\n### Why are fewer babies born on weekends?\n\n::: {#fig-births layout-ncol=2}\n\n![](../../../../materials/images/births_over_days.png){#fig-weekdays}\n\n![](../../../../materials/images/births_over_months.png){#fig-months}\n\n[Solomon Grundy, born on Monday...](https://www.wikiwand.com/en/Solomon_Grundy_(nursery_rhyme)) was an [Accountant?](https://www.quora.com/In-the-movie-%E2%80%9CThe-Accountant%E2%80%9D-what-does-Christian-say-to-calm-himself-down)\n:::\n\nLooks like an interesting story here...there are significantly fewer\nbirths on average on Sat and Sun, over the years! Why? Should we watch\n[Grey's Anatomy](https://www.hotstar.com/in/tv/greys-anatomy/14823) ?\n\nAnd why more births in September? That should be a no-brainer!! ðŸ¤£\n:::\n\n\n## {{< iconify mdi food-processor-outline >}} How do these Chart(s) Work?\n\nAny metric that is measured over regular time intervals forms a **time\nseries**. Analysis of Time Series is commercially important because of\nindustrial need and relevance, especially with respect to Forecasting\n(Weather data, sports scores, population growth figures, stock prices,\ndemand, sales, supply...).\n\nThe X-axis is mapped to a *temporal variable* (i.e. representing time). The Y-axis is mapped to one or more Quant variables. We can easily get a sense of rhythm, season, cyclical variations, peaks, troughs....and whether something is getting seriously out of hand over time. [Sadly](https://www.worldometers.info/coronavirus/country/india/)\n\nWe can also take averages of the Y-axis Quant variable, over periods of X-axis variable; e.g. weekly or monthly averages. This is called *smoothing* of the data. \n\n## {{< iconify ion bar-chart >}} Plotting a Time Series Line Chart\n\n::: {.panel-tabset .nav-pills style=\"background: whitesmoke;\"}\n### Using Orange\n\nThe Time Series Line Chart widget in Orange is described here. <https://orangedatamining.com/widget-catalog/time-series/line_chart/>\n\nLet us take some Births related data and plot it in Orange. \n\n{{< downloadthis data/US_births_2000_2014_SSA.csv dname=\"births\" label=\"Download the US Births data\" icon=\"database-fill-down\" type=\"info\" >}}\n\nAnd download the Line Chart workflow file for this data:\n\n{{< downloadthis Orange/time-series.ows dname=\"time-series\" label=\"Download the Time Series Line Chart Workflow\" icon=\"database-fill-down\" type=\"info\" >}}\n\nNote how we have two widgets for the Line Charts. More shortly. \n\n### Using RAWgraphs\n\n{{< video https://youtu.be/38nbSYy4VWw >}}\n\n\n\n### Using DataWrapper\n\nWe can use a built-in dataset to create a line chart for browser usage:\n![](images/R17XS-the-rise-of-google-chrome.png)\n\nNote that DataWrapper again requires/uses data in wide format to create its Line Charts!!\n\n:::\n\n## {{< iconify cil child >}} Dataset: Born in the USA\n\n> Tourist: Any famous people born around here?\\\n> Guide: No sir, best we can do is babies.\n\n### {{< iconify file-icons influxdata >}} Examine the Data\n\n![Born in the USA](../../../../materials/images/Orange/births-data-table.png){#fig-births-data-table}\n\n\n![Births Summary Table](../../../../materials/images/Orange/births-summary-table.png){#fig-births-summary-table}\n\n### {{< iconify streamline dictionary-language-book-solid >}} Data Dictionary\n\n::: callout-note\n### Quantitative Data\n\n-   `year`, `month`, `date_of_month`: (int) Columns giving time information\n-   `day-of_week`: (int) Additional Time information\n-   `births`: (int) Total live births across the USA that day\n:::\n\n::: callout-note\n### Qualitative Data\nNone. Though we might covert `day_of_week` and `month` into Qual variables later. \n:::\n\nEvenly spread `year`, `month`, `date_of_month` and `day_of_week` variables...the bumps are curious though, no? `day_of_week` is of course neat. `births` are numerical data and have a good spread with a [bimodal distribution](../22-Histograms/index.qmd#wait-but-why) distribution. Some numbers in the mid-range hardly occur at all...\nSo a premonition of some two-valued phenomenon here already. \n\n\n### {{< iconify material-symbols query-stats >}} Research Questions\n\n::: callout-note\nQ1. What does the `births` data look like over the years?\n\n![Birts over the Years](../../../../materials/images/Orange/births-over-the-years.png){#fig-births-over-years}\nHmmm...very busy graph. The overall trend is a slight bump in births around 2007 and then a slow reduction in births. Large variations otherwise, which we need to see in finer detail on a magnified scale, *a folded scale*,  or by averaging. \n\n~~Converting `month` or `day_of_week` to categorical in the File Menu does not provide us with a way of separating the time series by month or weekday...sad.~~. We will be able to average over month, day_of_week to see what happens. \n\n:::\n\n::: callout-note\nQ2. What do births look like averaged over `month`?\n\n![](../../../../materials/images/Orange/time-series-with-averaging.png)\n\nThis is good! We have converted the dataset to a timeseries, of course, and then added a `moving transform` widget, that allows us to take averages of `births` over weeks, months, or years. Play with this setting in the `moving transform` widget. \n\nWe see that averaging i.e. $aggregating$ by *Month of year* clearly shows September as the month for the most number of births.\n\n\n:::\n\n::: callout-note\nQ2. What do births look like averaged over `day_of_week`?\n\nHere too with the `moving transform` widget, choosing `Day of Week` as the aggregating parameter, we see a dip in births over weekends.\n\n:::\n\n\n::: callout-important\n### Folded Scale?\nLook at the figure below.\n\n![Aggregate over Days of Week](../../../../materials/images/Orange/Aggregate-births-week-of-year.png){#fig-aggregate-over-day-of-week}\n\nIt should be apparent that the line chart shows averages based on \"Week of Year\". What does that mean?\n\nImagine a carpenter's folding footrule:\n![](https://upload.wikimedia.org/wikipedia/commons/0/03/Metre_pliant_500px.png)\n\nImagine the entire time series stretched out and then folded over itself at intervals of a **week**. There will of course be overlapping data that represent data points for [the same week year after year.]{style=\"background: yellow;\"} THAT is what goes into the averaging!\n\nSo we see that the weeks in September show the highest average birth numbers, which seems right!\n\n:::\n\n## {{< iconify teenyicons candle-chart-outline >}} Other Plots\n\nImagine that we follow this overlap routine and get the data by same-week-of-year, as before. We need not necessarily average that data; we can simply plot each (repeated) week's worth of data as a box plot. This results in an array of boxplots, one per week, and is called a *candlestick plot*. \nClearly we can do this for months, weeks, and even days of the week. Here is what it looks like; it does not seem possible to create these with any of the tools we are currently using. \n\n![](images/candlestick.png){#fig-candlestick}\n[As before](../28-BoxPlotsViolins/index.qmd), the medians are the black lines across each boxplot, which is one for each *month*. Note that since the medians are towards the upper end of the boxplots, we can guess that the per-month distribution must be skewed to the left (lower than median values are less frequent).\n\nIf the Quantities that vary over time are not *continuous* but *discrete* values such as `high`, `medium`, and `low`,, a time-series heatmap is also a possibility. \n\n![](images/heatmap.png){#fig-time-series-heatmap}\nVery arbitrarily slicing the birth numbers into three bins titled `high`, `fine`, and `low`, we can plot a heatmap like this. Orange does have a heatmap widget, however it seems suited to Machine Learning methods such as Clustering. We need to investigate its possibilities for time series. \n\n## {{< iconify bi person-up >}} Your Turn\n\n1. Arctic and Antarctic Sea Ice coverage over time.\nIs global warming affecting ice coverage at the poles?\n\n{{< downloadthis data/Sea_ice_Index_Daily_Extent_G02135_v3.0.xlsx dname=\"SeaIce\" label=\"Download the Sea Ice Data\" icon=\"database-fill-down\" type=\"info\" >}}\n\nThis data is in wide form, and you may have to massage it into long form before pulling it into Orange!\n\n2. [In the Air Tonight](https://www.youtube.com/watch?v=YkADj0TPrJA): Head over to ~~Purple Rain~~ [Purple Air](https://map.purpleair.com/1/mAQI/a10/p604800/cC0#13.03/40.78041/-73.96397) and download air quality data from community based air quality sensors. Plot these as time series, and try getting historical data, or data on festivals or important occasions in specific cities. \n\n## {{< iconify mingcute thought-line >}} Wait, But Why?\n\n- We encounter many things that vary over time: weather, wealth, No. of users or downloads of an app, hits to a webpage, customers at a supermarket, or population of animals or plants in a region.\n- These are best represented by Line Charts\n- As humans, we are also deeply interested in patterns of recurrence over time, and in forecasting for the future, using tech, and using say [Oracles](https://www.arthur-conan-doyle.com/index.php/A_Point_of_Contact).\n- Both these purposes are amply served by Line Charts.\n\n\n\n## {{< iconify ooui references-ltr >}} References\n\n1. Robert Hyndman, *Forecasting: Principles and Practice (Third\nEdition)*.[available online](https://otexts.com/fpp3/)\\\n2. [Time Series Analysis at Our Coding\nClub](https://ourcodingclub.github.io/tutorials/time/)\\\n1. [The Nuclear Threat---The Shadow Peace, part\n1](http://www.fallen.io/shadow-peace/1/)\\\n1. [11 Ways to Visualize Changes Over Time -- A\nGuide](https://flowingdata.com/2010/01/07/11-ways-to-visualize-changes-over-time-a-guide/)\\\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../../../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../../../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n<link href=\"../../../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}