{
  "hash": "ac98e5be2e1a19f1448924ed8664c068",
  "result": {
    "markdown": "---\ntitle: \"\\U0001F578 Evolution and Flow\"\nsubtitle: \"Evolution and Flow\"\nauthor: \"Arvind V.\"\ndate: 22/Nov/2022\ndate-modified: \"2023-11-09\"\norder: 70\nabstract: \"Changes in Information over space and time\"\nimage: preview.jpg\nimage-alt: image from rawpixel.com\ncategories:\n- Line and Area Plots\n- Stream Charts\n- Parallel Set Plots\n- Alluvial Plots\n- Sankey Diagrams\n- Chord Diagrams\n- Waterfall Plots\n- Bump Charts\nbibliography: \n  - grateful-refs.bib\ncitation: true\n#suppress-bibliography: true\n---\n\n\n## {{< fa folder-open >}} Slides and Tutorials\n\n|                                                                                        |                                                                                                                       |                                                                                                 |                                                                               |\n|----------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------|\n| <a href=\"./files/evolutions.qmd\"><i class=\"fa-brands fa-r-project\"></i> R Tutorial</a> | <a href=\"./files/evolutions.ows\"> <iconify-icon icon=\"fluent-emoji:orange-circle\"></iconify-icon> Orange Tutorial</a> | <a href=\"./files/evolutions.rda\"> <i class=\"fa-solid fa-person-rays\"></i> Radiant Tutorial </a> | <a href=\"./data/data.zip\"> <i class=\"fa-solid fa-database\"> </i> Datasets</a> |\n\n## {{< iconify noto-v1 package >}} Setting up R Packages\n\n\n::: {.cell hash='evol-flow_cache/html/setup_2b1acfe98ff8fb71f290eccb5d996604'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggstream)\nlibrary(ggformula)\n\n# remotes::install_github(\"corybrunson/ggalluvial@main\", build_vignettes = TRUE)\nlibrary(ggalluvial)\n\n# install.packages(\"devtools\")\n# devtools::install_github(\"davidsjoberg/ggsankey\")\nlibrary(ggsankey)\nlibrary(networkD3)\nlibrary(echarts4r) # Interactive graphs\n```\n:::\n\n::: {.cell hash='evol-flow_cache/html/Extra Pedagogical Packages_4e8552ab4759ea4687f76f8801b55222'}\n\n:::\n\n\n## {{< iconify entypo line-graph >}} What Time Evolution Charts can we plot?\n\nIn these cases, the x-axis is typically *time*...and we chart the\nvariable of another Quant variable with respect to time, using a *line*\ngeometry.\n\nLet is take a healthcare budget dataset from [Our World in\nData](https://ourworldindata.org/grapher/public-health-expenditure-share-GDP-OWID):\nWe will plot graphs for 5 countries (India, China, Brazil, Russia,\nCanada ).\n\n::: callout-note\n## And introducing `echarts4r`\n\nWe will also build *interactive versions* of these charts using\n`echarts4r`!\n:::\n\nDownload this data by clicking on the button below:\n\n\n{{< downloadthis data/public-health-expenditure-share-GDP-OWID.csv dname=\"public-health-expenditure-share-GDP-OWID\" label=\"Download the Health data\" icon=\"database-fill-down\" type=\"info\" >}}\n\n\n::: {.cell hash='evol-flow_cache/html/unnamed-chunk-3_f6124955fac796416d4c763ccd6ae829'}\n\n````{.cell-code}\n```{{r}}\nhealth <-\n  read_csv(\"data/public-health-expenditure-share-GDP-OWID.csv\")\n\nhealth_filtered <- health %>%\n  filter(Entity %in% c(\n    \"India\",\n    \"China\",\n    \"United States\",\n    \"United Kingdom\",\n    \"Russia\",\n    \"Sweden\"\n  ))\n```\n````\n:::\n\n\n::: {.panel-tabset .nav-pills style=\"background: whitesmoke;\"}\n### Using ggformula\n\n\n::: {.cell layout-ncol=\"2\" hash='evol-flow_cache/html/unnamed-chunk-4_febfd40974fdc60fba6123e94950f2a3'}\n\n````{.cell-code}\n```{{r}}\n#| layout-ncol: 2\n#| results: hold\ngf_point(data = health_filtered,\n             public_health_expenditure_pc_gdp ~ Year, \n             colour = ~ Entity, \n             ylab = \"Healthcare Budget\\n as % of GDP\",\n         title = \"Line Charts to show Evolution (over Time )\") %>% \n  gf_theme(theme_minimal())\n\ngf_area(data = health_filtered,\n          public_health_expenditure_pc_gdp ~ Year, \n          fill = ~ Entity, alpha = 0.3, \n          ylab = \"Healthcare Budget\\n as % of GDP\",\n        title = \"Area Charts to show Evolution (over Time )\") %>% \n  gf_line(colour = ~ Entity) %>% \n  gf_theme(theme_minimal())\n```\n````\n\n::: {.cell-output-display}\n![](evol-flow_files/figure-html/unnamed-chunk-4-1.png){width=2100}\n:::\n\n::: {.cell-output-display}\n![](evol-flow_files/figure-html/unnamed-chunk-4-2.png){width=2100}\n:::\n:::\n\n\n### Using echarts4r\n\n\n::: {.cell layout-ncol=\"2\" hash='evol-flow_cache/html/unnamed-chunk-5_8bb42fd1308cbc593f26958476afe30f'}\n\n````{.cell-code}\n```{{r}}\n#| layout-ncol: 2\n#| results: hold\n\nhealth_filtered %>% group_by(Entity) %>% \n  e_charts(Year) %>% \n  e_scatter(public_health_expenditure_pc_gdp) %>% \n  e_line(public_health_expenditure_pc_gdp) %>% \n  e_x_axis(name = \"Year\", min = 1850, max = 2100) %>% \n  e_y_axis(name = \"Public Health Expenditure\", \n           nameLocation = \"middle\", nameGap = 25) %>% \n  e_tooltip()\n\nhealth_filtered %>% group_by(Entity) %>% \n  e_charts(Year) %>% \n  e_scatter(public_health_expenditure_pc_gdp) %>% \n  e_area(public_health_expenditure_pc_gdp) %>% \n  e_x_axis(name = \"Year\", min = 1850, max = 2100) %>% \n  e_y_axis(name = \"Public Health Expenditure\", \n           nameLocation = \"middle\",nameGap = 25) %>% \n  e_tooltip()\n```\n````\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"echarts4r html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-6fc7a56ff74a1a088f3e\" style=\"width:100%;height:500px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-6fc7a56ff74a1a088f3e\">{\"x\":{\"theme\":\"\",\"tl\":false,\"draw\":true,\"renderer\":\"canvas\",\"events\":[],\"buttons\":[],\"opts\":{\"yAxis\":[{\"show\":true,\"name\":\"Public Health Expenditure\",\"nameLocation\":\"middle\",\"nameGap\":25}],\"xAxis\":[{\"type\":\"value\",\"name\":\"Year\",\"min\":1850,\"max\":2100}],\"legend\":{\"data\":[\"China\",\"India\",\"Sweden\",\"United Kingdom\",\"United States\",\"China\",\"India\",\"Sweden\",\"United Kingdom\",\"United States\"]},\"series\":[{\"data\":[{\"value\":[2000,0.986]},{\"value\":[2001,0.971]},{\"value\":[2002,1.109]},{\"value\":[2003,1.251]},{\"value\":[2004,1.295]},{\"value\":[2005,1.37]},{\"value\":[2006,1.391]},{\"value\":[2007,1.436]},{\"value\":[2008,1.73]},{\"value\":[2009,2.143]},{\"value\":[2010,2.177]},{\"value\":[2011,2.315]},{\"value\":[2012,2.547]},{\"value\":[2013,2.705]},{\"value\":[2014,2.804]},{\"value\":[2015,2.986]},{\"value\":[2016,2.892]},{\"value\":[2017,2.86]},{\"value\":[2018,2.914]},{\"value\":[2019,3.002]}],\"name\":\"China\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[2000,0.9389999999999999]},{\"value\":[2001,0.909]},{\"value\":[2002,0.877]},{\"value\":[2003,0.819]},{\"value\":[2004,0.801]},{\"value\":[2005,0.828]},{\"value\":[2006,0.805]},{\"value\":[2007,0.795]},{\"value\":[2008,0.836]},{\"value\":[2009,0.907]},{\"value\":[2010,0.862]},{\"value\":[2011,0.91]},{\"value\":[2012,0.903]},{\"value\":[2013,0.829]},{\"value\":[2014,0.829]},{\"value\":[2015,0.928]},{\"value\":[2016,0.947]},{\"value\":[2017,0.974]},{\"value\":[2018,0.972]},{\"value\":[2019,0.998]}],\"name\":\"India\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[1880,0.12]},{\"value\":[1890,0.16]},{\"value\":[1900,0.19]},{\"value\":[1910,0.31]},{\"value\":[1920,0.25]},{\"value\":[1930,0.89]},{\"value\":[1960,2.50564019448947]},{\"value\":[1961,2.56459643435981]},{\"value\":[1962,2.62355267423015]},{\"value\":[1963,2.9699205834684]},{\"value\":[1964,3.07309400324149]},{\"value\":[1965,3.2647017828201]},{\"value\":[1966,3.60370016207455]},{\"value\":[1967,3.8542641815235]},{\"value\":[1968,4.24484927066451]},{\"value\":[1969,4.29643598055105]},{\"value\":[1970,4.547]},{\"value\":[1971,4.984]},{\"value\":[1972,5.073]},{\"value\":[1973,5.031]},{\"value\":[1974,5.498]},{\"value\":[1975,5.769]},{\"value\":[1976,6.021]},{\"value\":[1977,6.784]},{\"value\":[1978,6.841]},{\"value\":[1979,6.757]},{\"value\":[1980,7.107]},{\"value\":[1981,7.142]},{\"value\":[1982,7.197]},{\"value\":[1983,7.109]},{\"value\":[1984,6.942]},{\"value\":[1985,6.484]},{\"value\":[1986,6.286]},{\"value\":[1987,6.359]},{\"value\":[1988,6.256]},{\"value\":[1989,6.32]},{\"value\":[1990,5.692]},{\"value\":[1991,5.558]},{\"value\":[1992,6.471]},{\"value\":[1993,6.693]},{\"value\":[1994,6.348]},{\"value\":[1995,6.24]},{\"value\":[1996,6.456]},{\"value\":[1997,6.202]},{\"value\":[1998,6.255]},{\"value\":[1999,6.291]},{\"value\":[2000,6.267]},{\"value\":[2001,6.49]},{\"value\":[2002,6.779]},{\"value\":[2003,6.914]},{\"value\":[2004,6.722]},{\"value\":[2005,6.708]},{\"value\":[2006,6.632]},{\"value\":[2007,6.598]},{\"value\":[2008,6.772]},{\"value\":[2009,7.237]},{\"value\":[2010,6.863]},{\"value\":[2011,8.800000000000001]},{\"value\":[2012,9.041]},{\"value\":[2013,9.162000000000001]},{\"value\":[2014,9.199]},{\"value\":[2015,9.071]},{\"value\":[2016,9.144]},{\"value\":[2017,9.135999999999999]},{\"value\":[2018,9.276]},{\"value\":[2019,9.221]},{\"value\":[2020,9.877000000000001]},{\"value\":[2021,9.787000000000001]}],\"name\":\"Sweden\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[1880,0.13]},{\"value\":[1890,0.16]},{\"value\":[1900,0.29]},{\"value\":[1910,0.32]},{\"value\":[1920,0.5600000000000001]},{\"value\":[1930,0.64]},{\"value\":[1960,2.92035038363171]},{\"value\":[1961,2.97296930946292]},{\"value\":[1962,2.95542966751918]},{\"value\":[1963,2.97296930946292]},{\"value\":[1964,2.96419948849105]},{\"value\":[1965,3.10451662404092]},{\"value\":[1966,3.22729411764706]},{\"value\":[1967,3.39392071611253]},{\"value\":[1968,3.4026905370844]},{\"value\":[1969,3.30622250639386]},{\"value\":[1970,3.429]},{\"value\":[1971,3.469]},{\"value\":[1972,3.557]},{\"value\":[1973,3.476]},{\"value\":[1974,4.143]},{\"value\":[1975,4.486]},{\"value\":[1976,4.487]},{\"value\":[1977,4.378]},{\"value\":[1978,4.351]},{\"value\":[1979,4.252]},{\"value\":[1980,4.532]},{\"value\":[1981,4.71]},{\"value\":[1982,4.498]},{\"value\":[1983,4.666]},{\"value\":[1984,4.563]},{\"value\":[1985,4.428]},{\"value\":[1986,4.407]},{\"value\":[1987,4.421]},{\"value\":[1988,4.331]},{\"value\":[1989,4.249]},{\"value\":[1990,4.291]},{\"value\":[1991,4.586]},{\"value\":[1992,4.975]},{\"value\":[1993,5.066]},{\"value\":[1994,5.091]},{\"value\":[1995,4.668]},{\"value\":[1996,4.659]},{\"value\":[1997,5.135]},{\"value\":[1998,5.263]},{\"value\":[1999,5.463]},{\"value\":[2000,5.476]},{\"value\":[2001,5.737]},{\"value\":[2002,6.103]},{\"value\":[2003,6.316]},{\"value\":[2004,6.664]},{\"value\":[2005,6.792]},{\"value\":[2006,6.996]},{\"value\":[2007,6.996]},{\"value\":[2008,7.304]},{\"value\":[2009,8.090999999999999]},{\"value\":[2010,8.006]},{\"value\":[2011,7.973]},{\"value\":[2012,7.957]},{\"value\":[2013,7.857]},{\"value\":[2014,7.85]},{\"value\":[2015,7.779]},{\"value\":[2016,7.772]},{\"value\":[2017,7.631]},{\"value\":[2018,7.658]},{\"value\":[2019,7.836]},{\"value\":[2020,9.923]},{\"value\":[2021,9.898]}],\"name\":\"United Kingdom\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[1880,0.09]},{\"value\":[1890,0.14]},{\"value\":[1900,0.17]},{\"value\":[1910,0.26]},{\"value\":[1920,0.4]},{\"value\":[1930,0.34]},{\"value\":[1960,1.09367518248175]},{\"value\":[1961,1.1615]},{\"value\":[1962,1.17845620437956]},{\"value\":[1963,1.22084671532847]},{\"value\":[1964,1.22084671532847]},{\"value\":[1965,1.23780291970803]},{\"value\":[1966,1.49214598540146]},{\"value\":[1967,1.99235401459854]},{\"value\":[1968,2.11952554744526]},{\"value\":[1969,2.17039416058394]},{\"value\":[1970,2.323]},{\"value\":[1971,2.433]},{\"value\":[1972,2.491]},{\"value\":[1973,2.538]},{\"value\":[1974,2.769]},{\"value\":[1975,2.988]},{\"value\":[1976,3.049]},{\"value\":[1977,3.114]},{\"value\":[1978,3.14]},{\"value\":[1979,3.217]},{\"value\":[1980,3.458]},{\"value\":[1981,3.579]},{\"value\":[1982,3.822]},{\"value\":[1983,3.871]},{\"value\":[1984,3.786]},{\"value\":[1985,3.832]},{\"value\":[1986,3.973]},{\"value\":[1987,4.101]},{\"value\":[1988,4.125]},{\"value\":[1989,4.27]},{\"value\":[1990,4.543]},{\"value\":[1991,5.001]},{\"value\":[1992,5.283]},{\"value\":[1993,5.531]},{\"value\":[1994,5.689]},{\"value\":[1995,5.798]},{\"value\":[1996,6.242]},{\"value\":[1997,5.717]},{\"value\":[1998,5.56]},{\"value\":[1999,5.502]},{\"value\":[2000,5.543]},{\"value\":[2001,5.968]},{\"value\":[2002,6.326]},{\"value\":[2003,6.523]},{\"value\":[2004,6.608]},{\"value\":[2005,6.628]},{\"value\":[2006,6.781]},{\"value\":[2007,6.886]},{\"value\":[2008,7.198]},{\"value\":[2009,7.833]},{\"value\":[2010,7.889]},{\"value\":[2011,7.876]},{\"value\":[2012,7.853]},{\"value\":[2013,7.907]},{\"value\":[2014,13.372]},{\"value\":[2015,13.664]},{\"value\":[2016,13.912]},{\"value\":[2017,13.89]},{\"value\":[2018,13.796]},{\"value\":[2019,13.813]},{\"value\":[2020,15.949]}],\"name\":\"United States\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[2000,0.986]},{\"value\":[2001,0.971]},{\"value\":[2002,1.109]},{\"value\":[2003,1.251]},{\"value\":[2004,1.295]},{\"value\":[2005,1.37]},{\"value\":[2006,1.391]},{\"value\":[2007,1.436]},{\"value\":[2008,1.73]},{\"value\":[2009,2.143]},{\"value\":[2010,2.177]},{\"value\":[2011,2.315]},{\"value\":[2012,2.547]},{\"value\":[2013,2.705]},{\"value\":[2014,2.804]},{\"value\":[2015,2.986]},{\"value\":[2016,2.892]},{\"value\":[2017,2.86]},{\"value\":[2018,2.914]},{\"value\":[2019,3.002]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"China\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\"},{\"data\":[{\"value\":[2000,0.9389999999999999]},{\"value\":[2001,0.909]},{\"value\":[2002,0.877]},{\"value\":[2003,0.819]},{\"value\":[2004,0.801]},{\"value\":[2005,0.828]},{\"value\":[2006,0.805]},{\"value\":[2007,0.795]},{\"value\":[2008,0.836]},{\"value\":[2009,0.907]},{\"value\":[2010,0.862]},{\"value\":[2011,0.91]},{\"value\":[2012,0.903]},{\"value\":[2013,0.829]},{\"value\":[2014,0.829]},{\"value\":[2015,0.928]},{\"value\":[2016,0.947]},{\"value\":[2017,0.974]},{\"value\":[2018,0.972]},{\"value\":[2019,0.998]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"India\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\"},{\"data\":[{\"value\":[1880,0.12]},{\"value\":[1890,0.16]},{\"value\":[1900,0.19]},{\"value\":[1910,0.31]},{\"value\":[1920,0.25]},{\"value\":[1930,0.89]},{\"value\":[1960,2.50564019448947]},{\"value\":[1961,2.56459643435981]},{\"value\":[1962,2.62355267423015]},{\"value\":[1963,2.9699205834684]},{\"value\":[1964,3.07309400324149]},{\"value\":[1965,3.2647017828201]},{\"value\":[1966,3.60370016207455]},{\"value\":[1967,3.8542641815235]},{\"value\":[1968,4.24484927066451]},{\"value\":[1969,4.29643598055105]},{\"value\":[1970,4.547]},{\"value\":[1971,4.984]},{\"value\":[1972,5.073]},{\"value\":[1973,5.031]},{\"value\":[1974,5.498]},{\"value\":[1975,5.769]},{\"value\":[1976,6.021]},{\"value\":[1977,6.784]},{\"value\":[1978,6.841]},{\"value\":[1979,6.757]},{\"value\":[1980,7.107]},{\"value\":[1981,7.142]},{\"value\":[1982,7.197]},{\"value\":[1983,7.109]},{\"value\":[1984,6.942]},{\"value\":[1985,6.484]},{\"value\":[1986,6.286]},{\"value\":[1987,6.359]},{\"value\":[1988,6.256]},{\"value\":[1989,6.32]},{\"value\":[1990,5.692]},{\"value\":[1991,5.558]},{\"value\":[1992,6.471]},{\"value\":[1993,6.693]},{\"value\":[1994,6.348]},{\"value\":[1995,6.24]},{\"value\":[1996,6.456]},{\"value\":[1997,6.202]},{\"value\":[1998,6.255]},{\"value\":[1999,6.291]},{\"value\":[2000,6.267]},{\"value\":[2001,6.49]},{\"value\":[2002,6.779]},{\"value\":[2003,6.914]},{\"value\":[2004,6.722]},{\"value\":[2005,6.708]},{\"value\":[2006,6.632]},{\"value\":[2007,6.598]},{\"value\":[2008,6.772]},{\"value\":[2009,7.237]},{\"value\":[2010,6.863]},{\"value\":[2011,8.800000000000001]},{\"value\":[2012,9.041]},{\"value\":[2013,9.162000000000001]},{\"value\":[2014,9.199]},{\"value\":[2015,9.071]},{\"value\":[2016,9.144]},{\"value\":[2017,9.135999999999999]},{\"value\":[2018,9.276]},{\"value\":[2019,9.221]},{\"value\":[2020,9.877000000000001]},{\"value\":[2021,9.787000000000001]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"Sweden\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\"},{\"data\":[{\"value\":[1880,0.13]},{\"value\":[1890,0.16]},{\"value\":[1900,0.29]},{\"value\":[1910,0.32]},{\"value\":[1920,0.5600000000000001]},{\"value\":[1930,0.64]},{\"value\":[1960,2.92035038363171]},{\"value\":[1961,2.97296930946292]},{\"value\":[1962,2.95542966751918]},{\"value\":[1963,2.97296930946292]},{\"value\":[1964,2.96419948849105]},{\"value\":[1965,3.10451662404092]},{\"value\":[1966,3.22729411764706]},{\"value\":[1967,3.39392071611253]},{\"value\":[1968,3.4026905370844]},{\"value\":[1969,3.30622250639386]},{\"value\":[1970,3.429]},{\"value\":[1971,3.469]},{\"value\":[1972,3.557]},{\"value\":[1973,3.476]},{\"value\":[1974,4.143]},{\"value\":[1975,4.486]},{\"value\":[1976,4.487]},{\"value\":[1977,4.378]},{\"value\":[1978,4.351]},{\"value\":[1979,4.252]},{\"value\":[1980,4.532]},{\"value\":[1981,4.71]},{\"value\":[1982,4.498]},{\"value\":[1983,4.666]},{\"value\":[1984,4.563]},{\"value\":[1985,4.428]},{\"value\":[1986,4.407]},{\"value\":[1987,4.421]},{\"value\":[1988,4.331]},{\"value\":[1989,4.249]},{\"value\":[1990,4.291]},{\"value\":[1991,4.586]},{\"value\":[1992,4.975]},{\"value\":[1993,5.066]},{\"value\":[1994,5.091]},{\"value\":[1995,4.668]},{\"value\":[1996,4.659]},{\"value\":[1997,5.135]},{\"value\":[1998,5.263]},{\"value\":[1999,5.463]},{\"value\":[2000,5.476]},{\"value\":[2001,5.737]},{\"value\":[2002,6.103]},{\"value\":[2003,6.316]},{\"value\":[2004,6.664]},{\"value\":[2005,6.792]},{\"value\":[2006,6.996]},{\"value\":[2007,6.996]},{\"value\":[2008,7.304]},{\"value\":[2009,8.090999999999999]},{\"value\":[2010,8.006]},{\"value\":[2011,7.973]},{\"value\":[2012,7.957]},{\"value\":[2013,7.857]},{\"value\":[2014,7.85]},{\"value\":[2015,7.779]},{\"value\":[2016,7.772]},{\"value\":[2017,7.631]},{\"value\":[2018,7.658]},{\"value\":[2019,7.836]},{\"value\":[2020,9.923]},{\"value\":[2021,9.898]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"United Kingdom\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\"},{\"data\":[{\"value\":[1880,0.09]},{\"value\":[1890,0.14]},{\"value\":[1900,0.17]},{\"value\":[1910,0.26]},{\"value\":[1920,0.4]},{\"value\":[1930,0.34]},{\"value\":[1960,1.09367518248175]},{\"value\":[1961,1.1615]},{\"value\":[1962,1.17845620437956]},{\"value\":[1963,1.22084671532847]},{\"value\":[1964,1.22084671532847]},{\"value\":[1965,1.23780291970803]},{\"value\":[1966,1.49214598540146]},{\"value\":[1967,1.99235401459854]},{\"value\":[1968,2.11952554744526]},{\"value\":[1969,2.17039416058394]},{\"value\":[1970,2.323]},{\"value\":[1971,2.433]},{\"value\":[1972,2.491]},{\"value\":[1973,2.538]},{\"value\":[1974,2.769]},{\"value\":[1975,2.988]},{\"value\":[1976,3.049]},{\"value\":[1977,3.114]},{\"value\":[1978,3.14]},{\"value\":[1979,3.217]},{\"value\":[1980,3.458]},{\"value\":[1981,3.579]},{\"value\":[1982,3.822]},{\"value\":[1983,3.871]},{\"value\":[1984,3.786]},{\"value\":[1985,3.832]},{\"value\":[1986,3.973]},{\"value\":[1987,4.101]},{\"value\":[1988,4.125]},{\"value\":[1989,4.27]},{\"value\":[1990,4.543]},{\"value\":[1991,5.001]},{\"value\":[1992,5.283]},{\"value\":[1993,5.531]},{\"value\":[1994,5.689]},{\"value\":[1995,5.798]},{\"value\":[1996,6.242]},{\"value\":[1997,5.717]},{\"value\":[1998,5.56]},{\"value\":[1999,5.502]},{\"value\":[2000,5.543]},{\"value\":[2001,5.968]},{\"value\":[2002,6.326]},{\"value\":[2003,6.523]},{\"value\":[2004,6.608]},{\"value\":[2005,6.628]},{\"value\":[2006,6.781]},{\"value\":[2007,6.886]},{\"value\":[2008,7.198]},{\"value\":[2009,7.833]},{\"value\":[2010,7.889]},{\"value\":[2011,7.876]},{\"value\":[2012,7.853]},{\"value\":[2013,7.907]},{\"value\":[2014,13.372]},{\"value\":[2015,13.664]},{\"value\":[2016,13.912]},{\"value\":[2017,13.89]},{\"value\":[2018,13.796]},{\"value\":[2019,13.813]},{\"value\":[2020,15.949]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"United States\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\"}],\"tooltip\":{\"trigger\":\"item\"}},\"dispose\":true},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n```{=html}\n<div class=\"echarts4r html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-8bf24408e1633110daf4\" style=\"width:100%;height:500px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8bf24408e1633110daf4\">{\"x\":{\"theme\":\"\",\"tl\":false,\"draw\":true,\"renderer\":\"canvas\",\"events\":[],\"buttons\":[],\"opts\":{\"yAxis\":[{\"show\":true,\"name\":\"Public Health Expenditure\",\"nameLocation\":\"middle\",\"nameGap\":25}],\"xAxis\":[{\"type\":\"value\",\"name\":\"Year\",\"min\":1850,\"max\":2100}],\"legend\":{\"data\":[\"China\",\"India\",\"Sweden\",\"United Kingdom\",\"United States\",\"China\",\"India\",\"Sweden\",\"United Kingdom\",\"United States\"]},\"series\":[{\"data\":[{\"value\":[2000,0.986]},{\"value\":[2001,0.971]},{\"value\":[2002,1.109]},{\"value\":[2003,1.251]},{\"value\":[2004,1.295]},{\"value\":[2005,1.37]},{\"value\":[2006,1.391]},{\"value\":[2007,1.436]},{\"value\":[2008,1.73]},{\"value\":[2009,2.143]},{\"value\":[2010,2.177]},{\"value\":[2011,2.315]},{\"value\":[2012,2.547]},{\"value\":[2013,2.705]},{\"value\":[2014,2.804]},{\"value\":[2015,2.986]},{\"value\":[2016,2.892]},{\"value\":[2017,2.86]},{\"value\":[2018,2.914]},{\"value\":[2019,3.002]}],\"name\":\"China\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[2000,0.9389999999999999]},{\"value\":[2001,0.909]},{\"value\":[2002,0.877]},{\"value\":[2003,0.819]},{\"value\":[2004,0.801]},{\"value\":[2005,0.828]},{\"value\":[2006,0.805]},{\"value\":[2007,0.795]},{\"value\":[2008,0.836]},{\"value\":[2009,0.907]},{\"value\":[2010,0.862]},{\"value\":[2011,0.91]},{\"value\":[2012,0.903]},{\"value\":[2013,0.829]},{\"value\":[2014,0.829]},{\"value\":[2015,0.928]},{\"value\":[2016,0.947]},{\"value\":[2017,0.974]},{\"value\":[2018,0.972]},{\"value\":[2019,0.998]}],\"name\":\"India\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[1880,0.12]},{\"value\":[1890,0.16]},{\"value\":[1900,0.19]},{\"value\":[1910,0.31]},{\"value\":[1920,0.25]},{\"value\":[1930,0.89]},{\"value\":[1960,2.50564019448947]},{\"value\":[1961,2.56459643435981]},{\"value\":[1962,2.62355267423015]},{\"value\":[1963,2.9699205834684]},{\"value\":[1964,3.07309400324149]},{\"value\":[1965,3.2647017828201]},{\"value\":[1966,3.60370016207455]},{\"value\":[1967,3.8542641815235]},{\"value\":[1968,4.24484927066451]},{\"value\":[1969,4.29643598055105]},{\"value\":[1970,4.547]},{\"value\":[1971,4.984]},{\"value\":[1972,5.073]},{\"value\":[1973,5.031]},{\"value\":[1974,5.498]},{\"value\":[1975,5.769]},{\"value\":[1976,6.021]},{\"value\":[1977,6.784]},{\"value\":[1978,6.841]},{\"value\":[1979,6.757]},{\"value\":[1980,7.107]},{\"value\":[1981,7.142]},{\"value\":[1982,7.197]},{\"value\":[1983,7.109]},{\"value\":[1984,6.942]},{\"value\":[1985,6.484]},{\"value\":[1986,6.286]},{\"value\":[1987,6.359]},{\"value\":[1988,6.256]},{\"value\":[1989,6.32]},{\"value\":[1990,5.692]},{\"value\":[1991,5.558]},{\"value\":[1992,6.471]},{\"value\":[1993,6.693]},{\"value\":[1994,6.348]},{\"value\":[1995,6.24]},{\"value\":[1996,6.456]},{\"value\":[1997,6.202]},{\"value\":[1998,6.255]},{\"value\":[1999,6.291]},{\"value\":[2000,6.267]},{\"value\":[2001,6.49]},{\"value\":[2002,6.779]},{\"value\":[2003,6.914]},{\"value\":[2004,6.722]},{\"value\":[2005,6.708]},{\"value\":[2006,6.632]},{\"value\":[2007,6.598]},{\"value\":[2008,6.772]},{\"value\":[2009,7.237]},{\"value\":[2010,6.863]},{\"value\":[2011,8.800000000000001]},{\"value\":[2012,9.041]},{\"value\":[2013,9.162000000000001]},{\"value\":[2014,9.199]},{\"value\":[2015,9.071]},{\"value\":[2016,9.144]},{\"value\":[2017,9.135999999999999]},{\"value\":[2018,9.276]},{\"value\":[2019,9.221]},{\"value\":[2020,9.877000000000001]},{\"value\":[2021,9.787000000000001]}],\"name\":\"Sweden\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[1880,0.13]},{\"value\":[1890,0.16]},{\"value\":[1900,0.29]},{\"value\":[1910,0.32]},{\"value\":[1920,0.5600000000000001]},{\"value\":[1930,0.64]},{\"value\":[1960,2.92035038363171]},{\"value\":[1961,2.97296930946292]},{\"value\":[1962,2.95542966751918]},{\"value\":[1963,2.97296930946292]},{\"value\":[1964,2.96419948849105]},{\"value\":[1965,3.10451662404092]},{\"value\":[1966,3.22729411764706]},{\"value\":[1967,3.39392071611253]},{\"value\":[1968,3.4026905370844]},{\"value\":[1969,3.30622250639386]},{\"value\":[1970,3.429]},{\"value\":[1971,3.469]},{\"value\":[1972,3.557]},{\"value\":[1973,3.476]},{\"value\":[1974,4.143]},{\"value\":[1975,4.486]},{\"value\":[1976,4.487]},{\"value\":[1977,4.378]},{\"value\":[1978,4.351]},{\"value\":[1979,4.252]},{\"value\":[1980,4.532]},{\"value\":[1981,4.71]},{\"value\":[1982,4.498]},{\"value\":[1983,4.666]},{\"value\":[1984,4.563]},{\"value\":[1985,4.428]},{\"value\":[1986,4.407]},{\"value\":[1987,4.421]},{\"value\":[1988,4.331]},{\"value\":[1989,4.249]},{\"value\":[1990,4.291]},{\"value\":[1991,4.586]},{\"value\":[1992,4.975]},{\"value\":[1993,5.066]},{\"value\":[1994,5.091]},{\"value\":[1995,4.668]},{\"value\":[1996,4.659]},{\"value\":[1997,5.135]},{\"value\":[1998,5.263]},{\"value\":[1999,5.463]},{\"value\":[2000,5.476]},{\"value\":[2001,5.737]},{\"value\":[2002,6.103]},{\"value\":[2003,6.316]},{\"value\":[2004,6.664]},{\"value\":[2005,6.792]},{\"value\":[2006,6.996]},{\"value\":[2007,6.996]},{\"value\":[2008,7.304]},{\"value\":[2009,8.090999999999999]},{\"value\":[2010,8.006]},{\"value\":[2011,7.973]},{\"value\":[2012,7.957]},{\"value\":[2013,7.857]},{\"value\":[2014,7.85]},{\"value\":[2015,7.779]},{\"value\":[2016,7.772]},{\"value\":[2017,7.631]},{\"value\":[2018,7.658]},{\"value\":[2019,7.836]},{\"value\":[2020,9.923]},{\"value\":[2021,9.898]}],\"name\":\"United Kingdom\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[1880,0.09]},{\"value\":[1890,0.14]},{\"value\":[1900,0.17]},{\"value\":[1910,0.26]},{\"value\":[1920,0.4]},{\"value\":[1930,0.34]},{\"value\":[1960,1.09367518248175]},{\"value\":[1961,1.1615]},{\"value\":[1962,1.17845620437956]},{\"value\":[1963,1.22084671532847]},{\"value\":[1964,1.22084671532847]},{\"value\":[1965,1.23780291970803]},{\"value\":[1966,1.49214598540146]},{\"value\":[1967,1.99235401459854]},{\"value\":[1968,2.11952554744526]},{\"value\":[1969,2.17039416058394]},{\"value\":[1970,2.323]},{\"value\":[1971,2.433]},{\"value\":[1972,2.491]},{\"value\":[1973,2.538]},{\"value\":[1974,2.769]},{\"value\":[1975,2.988]},{\"value\":[1976,3.049]},{\"value\":[1977,3.114]},{\"value\":[1978,3.14]},{\"value\":[1979,3.217]},{\"value\":[1980,3.458]},{\"value\":[1981,3.579]},{\"value\":[1982,3.822]},{\"value\":[1983,3.871]},{\"value\":[1984,3.786]},{\"value\":[1985,3.832]},{\"value\":[1986,3.973]},{\"value\":[1987,4.101]},{\"value\":[1988,4.125]},{\"value\":[1989,4.27]},{\"value\":[1990,4.543]},{\"value\":[1991,5.001]},{\"value\":[1992,5.283]},{\"value\":[1993,5.531]},{\"value\":[1994,5.689]},{\"value\":[1995,5.798]},{\"value\":[1996,6.242]},{\"value\":[1997,5.717]},{\"value\":[1998,5.56]},{\"value\":[1999,5.502]},{\"value\":[2000,5.543]},{\"value\":[2001,5.968]},{\"value\":[2002,6.326]},{\"value\":[2003,6.523]},{\"value\":[2004,6.608]},{\"value\":[2005,6.628]},{\"value\":[2006,6.781]},{\"value\":[2007,6.886]},{\"value\":[2008,7.198]},{\"value\":[2009,7.833]},{\"value\":[2010,7.889]},{\"value\":[2011,7.876]},{\"value\":[2012,7.853]},{\"value\":[2013,7.907]},{\"value\":[2014,13.372]},{\"value\":[2015,13.664]},{\"value\":[2016,13.912]},{\"value\":[2017,13.89]},{\"value\":[2018,13.796]},{\"value\":[2019,13.813]},{\"value\":[2020,15.949]}],\"name\":\"United States\",\"type\":\"scatter\",\"symbol\":null,\"coordinateSystem\":\"cartesian2d\",\"yAxisIndex\":0,\"xAxisIndex\":0,\"symbolSize\":3},{\"data\":[{\"value\":[2000,0.986]},{\"value\":[2001,0.971]},{\"value\":[2002,1.109]},{\"value\":[2003,1.251]},{\"value\":[2004,1.295]},{\"value\":[2005,1.37]},{\"value\":[2006,1.391]},{\"value\":[2007,1.436]},{\"value\":[2008,1.73]},{\"value\":[2009,2.143]},{\"value\":[2010,2.177]},{\"value\":[2011,2.315]},{\"value\":[2012,2.547]},{\"value\":[2013,2.705]},{\"value\":[2014,2.804]},{\"value\":[2015,2.986]},{\"value\":[2016,2.892]},{\"value\":[2017,2.86]},{\"value\":[2018,2.914]},{\"value\":[2019,3.002]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"China\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\",\"areaStyle\":[]},{\"data\":[{\"value\":[2000,0.9389999999999999]},{\"value\":[2001,0.909]},{\"value\":[2002,0.877]},{\"value\":[2003,0.819]},{\"value\":[2004,0.801]},{\"value\":[2005,0.828]},{\"value\":[2006,0.805]},{\"value\":[2007,0.795]},{\"value\":[2008,0.836]},{\"value\":[2009,0.907]},{\"value\":[2010,0.862]},{\"value\":[2011,0.91]},{\"value\":[2012,0.903]},{\"value\":[2013,0.829]},{\"value\":[2014,0.829]},{\"value\":[2015,0.928]},{\"value\":[2016,0.947]},{\"value\":[2017,0.974]},{\"value\":[2018,0.972]},{\"value\":[2019,0.998]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"India\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\",\"areaStyle\":[]},{\"data\":[{\"value\":[1880,0.12]},{\"value\":[1890,0.16]},{\"value\":[1900,0.19]},{\"value\":[1910,0.31]},{\"value\":[1920,0.25]},{\"value\":[1930,0.89]},{\"value\":[1960,2.50564019448947]},{\"value\":[1961,2.56459643435981]},{\"value\":[1962,2.62355267423015]},{\"value\":[1963,2.9699205834684]},{\"value\":[1964,3.07309400324149]},{\"value\":[1965,3.2647017828201]},{\"value\":[1966,3.60370016207455]},{\"value\":[1967,3.8542641815235]},{\"value\":[1968,4.24484927066451]},{\"value\":[1969,4.29643598055105]},{\"value\":[1970,4.547]},{\"value\":[1971,4.984]},{\"value\":[1972,5.073]},{\"value\":[1973,5.031]},{\"value\":[1974,5.498]},{\"value\":[1975,5.769]},{\"value\":[1976,6.021]},{\"value\":[1977,6.784]},{\"value\":[1978,6.841]},{\"value\":[1979,6.757]},{\"value\":[1980,7.107]},{\"value\":[1981,7.142]},{\"value\":[1982,7.197]},{\"value\":[1983,7.109]},{\"value\":[1984,6.942]},{\"value\":[1985,6.484]},{\"value\":[1986,6.286]},{\"value\":[1987,6.359]},{\"value\":[1988,6.256]},{\"value\":[1989,6.32]},{\"value\":[1990,5.692]},{\"value\":[1991,5.558]},{\"value\":[1992,6.471]},{\"value\":[1993,6.693]},{\"value\":[1994,6.348]},{\"value\":[1995,6.24]},{\"value\":[1996,6.456]},{\"value\":[1997,6.202]},{\"value\":[1998,6.255]},{\"value\":[1999,6.291]},{\"value\":[2000,6.267]},{\"value\":[2001,6.49]},{\"value\":[2002,6.779]},{\"value\":[2003,6.914]},{\"value\":[2004,6.722]},{\"value\":[2005,6.708]},{\"value\":[2006,6.632]},{\"value\":[2007,6.598]},{\"value\":[2008,6.772]},{\"value\":[2009,7.237]},{\"value\":[2010,6.863]},{\"value\":[2011,8.800000000000001]},{\"value\":[2012,9.041]},{\"value\":[2013,9.162000000000001]},{\"value\":[2014,9.199]},{\"value\":[2015,9.071]},{\"value\":[2016,9.144]},{\"value\":[2017,9.135999999999999]},{\"value\":[2018,9.276]},{\"value\":[2019,9.221]},{\"value\":[2020,9.877000000000001]},{\"value\":[2021,9.787000000000001]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"Sweden\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\",\"areaStyle\":[]},{\"data\":[{\"value\":[1880,0.13]},{\"value\":[1890,0.16]},{\"value\":[1900,0.29]},{\"value\":[1910,0.32]},{\"value\":[1920,0.5600000000000001]},{\"value\":[1930,0.64]},{\"value\":[1960,2.92035038363171]},{\"value\":[1961,2.97296930946292]},{\"value\":[1962,2.95542966751918]},{\"value\":[1963,2.97296930946292]},{\"value\":[1964,2.96419948849105]},{\"value\":[1965,3.10451662404092]},{\"value\":[1966,3.22729411764706]},{\"value\":[1967,3.39392071611253]},{\"value\":[1968,3.4026905370844]},{\"value\":[1969,3.30622250639386]},{\"value\":[1970,3.429]},{\"value\":[1971,3.469]},{\"value\":[1972,3.557]},{\"value\":[1973,3.476]},{\"value\":[1974,4.143]},{\"value\":[1975,4.486]},{\"value\":[1976,4.487]},{\"value\":[1977,4.378]},{\"value\":[1978,4.351]},{\"value\":[1979,4.252]},{\"value\":[1980,4.532]},{\"value\":[1981,4.71]},{\"value\":[1982,4.498]},{\"value\":[1983,4.666]},{\"value\":[1984,4.563]},{\"value\":[1985,4.428]},{\"value\":[1986,4.407]},{\"value\":[1987,4.421]},{\"value\":[1988,4.331]},{\"value\":[1989,4.249]},{\"value\":[1990,4.291]},{\"value\":[1991,4.586]},{\"value\":[1992,4.975]},{\"value\":[1993,5.066]},{\"value\":[1994,5.091]},{\"value\":[1995,4.668]},{\"value\":[1996,4.659]},{\"value\":[1997,5.135]},{\"value\":[1998,5.263]},{\"value\":[1999,5.463]},{\"value\":[2000,5.476]},{\"value\":[2001,5.737]},{\"value\":[2002,6.103]},{\"value\":[2003,6.316]},{\"value\":[2004,6.664]},{\"value\":[2005,6.792]},{\"value\":[2006,6.996]},{\"value\":[2007,6.996]},{\"value\":[2008,7.304]},{\"value\":[2009,8.090999999999999]},{\"value\":[2010,8.006]},{\"value\":[2011,7.973]},{\"value\":[2012,7.957]},{\"value\":[2013,7.857]},{\"value\":[2014,7.85]},{\"value\":[2015,7.779]},{\"value\":[2016,7.772]},{\"value\":[2017,7.631]},{\"value\":[2018,7.658]},{\"value\":[2019,7.836]},{\"value\":[2020,9.923]},{\"value\":[2021,9.898]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"United Kingdom\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\",\"areaStyle\":[]},{\"data\":[{\"value\":[1880,0.09]},{\"value\":[1890,0.14]},{\"value\":[1900,0.17]},{\"value\":[1910,0.26]},{\"value\":[1920,0.4]},{\"value\":[1930,0.34]},{\"value\":[1960,1.09367518248175]},{\"value\":[1961,1.1615]},{\"value\":[1962,1.17845620437956]},{\"value\":[1963,1.22084671532847]},{\"value\":[1964,1.22084671532847]},{\"value\":[1965,1.23780291970803]},{\"value\":[1966,1.49214598540146]},{\"value\":[1967,1.99235401459854]},{\"value\":[1968,2.11952554744526]},{\"value\":[1969,2.17039416058394]},{\"value\":[1970,2.323]},{\"value\":[1971,2.433]},{\"value\":[1972,2.491]},{\"value\":[1973,2.538]},{\"value\":[1974,2.769]},{\"value\":[1975,2.988]},{\"value\":[1976,3.049]},{\"value\":[1977,3.114]},{\"value\":[1978,3.14]},{\"value\":[1979,3.217]},{\"value\":[1980,3.458]},{\"value\":[1981,3.579]},{\"value\":[1982,3.822]},{\"value\":[1983,3.871]},{\"value\":[1984,3.786]},{\"value\":[1985,3.832]},{\"value\":[1986,3.973]},{\"value\":[1987,4.101]},{\"value\":[1988,4.125]},{\"value\":[1989,4.27]},{\"value\":[1990,4.543]},{\"value\":[1991,5.001]},{\"value\":[1992,5.283]},{\"value\":[1993,5.531]},{\"value\":[1994,5.689]},{\"value\":[1995,5.798]},{\"value\":[1996,6.242]},{\"value\":[1997,5.717]},{\"value\":[1998,5.56]},{\"value\":[1999,5.502]},{\"value\":[2000,5.543]},{\"value\":[2001,5.968]},{\"value\":[2002,6.326]},{\"value\":[2003,6.523]},{\"value\":[2004,6.608]},{\"value\":[2005,6.628]},{\"value\":[2006,6.781]},{\"value\":[2007,6.886]},{\"value\":[2008,7.198]},{\"value\":[2009,7.833]},{\"value\":[2010,7.889]},{\"value\":[2011,7.876]},{\"value\":[2012,7.853]},{\"value\":[2013,7.907]},{\"value\":[2014,13.372]},{\"value\":[2015,13.664]},{\"value\":[2016,13.912]},{\"value\":[2017,13.89]},{\"value\":[2018,13.796]},{\"value\":[2019,13.813]},{\"value\":[2020,15.949]}],\"yAxisIndex\":0,\"xAxisIndex\":0,\"name\":\"United States\",\"type\":\"line\",\"coordinateSystem\":\"cartesian2d\",\"areaStyle\":[]}],\"tooltip\":{\"trigger\":\"item\"}},\"dispose\":true},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n:::\n\n## {{< iconify carbon sankey-diagram-alt >}} What Space Evolution Charts can we plot?\n\nHere, the *space* can be any Qual variable, and we can chart another\nQuant or Qual variable move across levels of the first chosen Qual\nvariable.\n\nFor instance we can contemplate enrollment at a University, and show how\nstudents move from course to course in a University. Or how customers\ndrift from one category of products or brands to another....or the\nmovement of cricket players from one IPL Team to another !!\n\nHere is what [Thomas Lin\nPedersen](https://ggforce.data-imaginist.com/reference/geom_parallel_sets.html)\nsays:\n\n> A **parallel sets diagram** is a type of visualisation showing the\n> interaction between multiple categorical variables. If the variables\n> have an intrinsic order the representation can be thought of as a\n> **Sankey Diagram**. If each variable is a point in time it will\n> resemble an **Alluvial diagram**.\n\n![](images/sankey.png){fig-align=\"center\" width=\"800\"}\n\n-   The Qualitative variables being connected are mapped to\n    `stages/axes`\n-   Each *level* within a Qual variable is mapped to\n    `nodes / strata / lodes`;\n-   And the connections between the `strata` of the `axes` are called\n    `flows / links / alluvia`.\\\n\nSuch diagrams are best used when you want to show a many-to-many mapping\nbetween two domains or multiple paths through a set of stages E.g\nStudents going through multiple courses during a semester of study.\n\nHere is an example of a Sankey Diagram: This diagram show how energy is\nconverted or transmitted before being consumed or lost: supplies are on\nthe left, and demands are on the right. (Data: Department of Energy &\nClimate Change via Tom Counsell)[^1]:\n\n<iframe width=\"100%\" height=\"684\" frameborder=\"0\" src=\"https://observablehq.com/embed/@d3/sankey?cells=chart\">\n\n</iframe>\n\n::: callout-note\n## Switching to ggplot here\n\nFor the next few charts, there are (as yet) no equivalents in\n`ggformula`. Hence we will use `ggplot`.\n:::\n\n### {{< iconify pajamas issue-type-test-case >}} Case Study-1: Titanic Dataset\n\n\n::: {.cell layout-ncol=\"2\" hash='evol-flow_cache/html/more-charts_5bbdd070926ba5367965efb35270b8ad'}\n\n````{.cell-code}\n```{{r}}\n#| label: more-charts\n#| warning: false\n#| message: false\n#| layout-ncol: 2\n\n# library(ggalluvial)\ndata(\"Titanic\")\nTitanic <- Titanic %>% as_tibble()\nTitanic\n```\n````\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Class\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Sex\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Age\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Survived\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"n\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1st\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"0\"},{\"1\":\"2nd\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"0\"},{\"1\":\"3rd\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"35\"},{\"1\":\"Crew\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"0\"},{\"1\":\"1st\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"0\"},{\"1\":\"2nd\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"0\"},{\"1\":\"3rd\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"17\"},{\"1\":\"Crew\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"No\",\"5\":\"0\"},{\"1\":\"1st\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"118\"},{\"1\":\"2nd\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"154\"},{\"1\":\"3rd\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"387\"},{\"1\":\"Crew\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"670\"},{\"1\":\"1st\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"4\"},{\"1\":\"2nd\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"13\"},{\"1\":\"3rd\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"89\"},{\"1\":\"Crew\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"No\",\"5\":\"3\"},{\"1\":\"1st\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"5\"},{\"1\":\"2nd\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"11\"},{\"1\":\"3rd\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"13\"},{\"1\":\"Crew\",\"2\":\"Male\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"0\"},{\"1\":\"1st\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"1\"},{\"1\":\"2nd\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"13\"},{\"1\":\"3rd\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"14\"},{\"1\":\"Crew\",\"2\":\"Female\",\"3\":\"Child\",\"4\":\"Yes\",\"5\":\"0\"},{\"1\":\"1st\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"57\"},{\"1\":\"2nd\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"14\"},{\"1\":\"3rd\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"75\"},{\"1\":\"Crew\",\"2\":\"Male\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"192\"},{\"1\":\"1st\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"140\"},{\"1\":\"2nd\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"80\"},{\"1\":\"3rd\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"76\"},{\"1\":\"Crew\",\"2\":\"Female\",\"3\":\"Adult\",\"4\":\"Yes\",\"5\":\"20\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n::: callout-note\n## Table Form Data\n\nNote that this data is in **tidy wide** / **table** form, with separate\ncolumns for each Qualitative variable and a separate `count` column,\nwhich we saw when we examined Categorical Data. This is, in my opinion,\nintuitively the best form of data to plot a Sankey plot with. But there\nare other forms such as the **tidy long** form which we have been using\npractically all this while. You will find examples of on the\n`ggalluvial` website using **tidy long** form data.\n<https://corybrunson.github.io/ggalluvial/>\n:::\n\n::: {.panel-tabset .nav-pills style=\"background: whitesmoke;\"}\n#### Using ggplot\n\n\n::: {.cell hash='evol-flow_cache/html/unnamed-chunk-7_516621577530caa527dc261716db0578'}\n\n````{.cell-code}\n```{{r}}\nTitanic %>% ggplot(data = .,\n    \n# Select the Categorical Variables for the vertical Axes / Stages\n       aes(axis1 = Class, \n           axis2 = Sex, \n           axis3 = Age,\n           axis4 = Survived,\n           y = n), fill = \"white\") +\n  \n# Alluvials between Categorical Axes\n  geom_alluvium(aes(fill = Survived), \n                colour = \"black\", \n                linewidth = 0.25) +\n  \n# Vertical segments for each Categorical Variable2 \n  geom_stratum(colour = \"black\", \n               linewidth = 1, \n               fill = \"white\") + \n  \n# Labels for each \"level\" of the Categorical Axes\n  geom_text(stat = \"stratum\", \n            aes(label = after_stat(stratum))) +\n  \n\n  \n# Scales and Colours\n  scale_x_discrete(limits = c(\"Class\", \"Sex\", \"Age\"), \n                   expand = c(.2, .05)) +\n  \n  scale_fill_manual(values = c(\"red\", \"green\")) + \n  \n  xlab(\"Demographic\") +\n  theme_minimal() +\n  ggtitle(\"Passengers on the maiden voyage of the Titanic\",\n          \"Stratified by demographics and survival\")\n```\n````\n\n::: {.cell-output-display}\n![](evol-flow_files/figure-html/unnamed-chunk-7-1.png){width=2100}\n:::\n:::\n\n\n> Here is how the package `ggalluvial` defines the elements of a typical\n> alluvial plot:\n>\n> -   An **axis** is a dimension (variable) along which the data are\n>     vertically arranged at a fixed horizontal position. The plot above\n>     uses three categorical axes: Class, Sex, and Age.\n> -   The groups at each axis are depicted as opaque blocks called\n>     **strata**. For example, the Class axis contains four strata: 1st,\n>     2nd, 3rd, and Crew.\n> -   Horizontal (x-) splines called **alluvia** span the **entire**\n>     width of the plot. In this plot, each alluvium corresponds to a\n>     fixed **strata** value of each axis variable, indicated by its\n>     vertical position at the axis, as well as of the Survived\n>     variable, indicated by its fill color.\n> -   The segments of the **alluvia** between pairs of adjacent axes are\n>     **flows**.\n> -   The **alluvia** intersect the **strata** at **lodes**. The\n>     **lodes** are not visualized in the above plot, but they can be\n>     inferred as *filled rectangles* extending the flows through the\n>     strata at each end of the plot or connecting the flows on either\n>     side of the center stratum.\n\n#### Using echarts4r\n\nLet us make an interactive graph for this dataset using `echarts4`.\\\n\n\n::: {.cell hash='evol-flow_cache/html/ashtavakra_704d6cc315b7a8a618f307502e86ca5d'}\n\n````{.cell-code}\n```{{r}}\n#| label: ashtavakra\n#| message: false\n#| warning: false\n\nClassSex <- \n  Titanic %>% group_by(Class, Sex) %>% \n  summarise(cs = sum(n)) %>% \n  ungroup() %>% \n  rename(\"source\" = Class, \"target\" = Sex, \"value\" = cs)\n            \nSexAge <- \n  Titanic %>% group_by(Sex,Age) %>% \n  summarise(sa = sum(n)) %>% \n  ungroup() %>% \n  rename(\"source\" = Sex, \"target\" = Age, \"value\" = sa)\n\nAgeSurvived <- \n  Titanic %>% group_by(Age,Survived) %>% \n  summarise(as = sum(n)) %>% \n  ungroup() %>% \n  rename(\"source\" = Age, \"target\" = Survived, \"value\" = as)\n\nCombo <- rbind(ClassSex, SexAge, AgeSurvived)\nCombo\n\nCombo %>% e_charts() %>% \n  e_sankey(source, target, value) %>% \n  e_title(\"Titanic: Who lived, and who didn't?\") %>% \n  e_tooltip()\n```\n````\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"source\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"target\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"value\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1st\",\"2\":\"Female\",\"3\":\"145\"},{\"1\":\"1st\",\"2\":\"Male\",\"3\":\"180\"},{\"1\":\"2nd\",\"2\":\"Female\",\"3\":\"106\"},{\"1\":\"2nd\",\"2\":\"Male\",\"3\":\"179\"},{\"1\":\"3rd\",\"2\":\"Female\",\"3\":\"196\"},{\"1\":\"3rd\",\"2\":\"Male\",\"3\":\"510\"},{\"1\":\"Crew\",\"2\":\"Female\",\"3\":\"23\"},{\"1\":\"Crew\",\"2\":\"Male\",\"3\":\"862\"},{\"1\":\"Female\",\"2\":\"Adult\",\"3\":\"425\"},{\"1\":\"Female\",\"2\":\"Child\",\"3\":\"45\"},{\"1\":\"Male\",\"2\":\"Adult\",\"3\":\"1667\"},{\"1\":\"Male\",\"2\":\"Child\",\"3\":\"64\"},{\"1\":\"Adult\",\"2\":\"No\",\"3\":\"1438\"},{\"1\":\"Adult\",\"2\":\"Yes\",\"3\":\"654\"},{\"1\":\"Child\",\"2\":\"No\",\"3\":\"52\"},{\"1\":\"Child\",\"2\":\"Yes\",\"3\":\"57\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"echarts4r html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-cbd2ed1c55d2077ef772\" style=\"width:100%;height:500px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-cbd2ed1c55d2077ef772\">{\"x\":{\"theme\":\"\",\"tl\":false,\"draw\":true,\"renderer\":\"canvas\",\"events\":[],\"buttons\":[],\"opts\":{\"series\":[{\"type\":\"sankey\",\"orient\":\"none\",\"data\":[{\"name\":\"1st\"},{\"name\":\"2nd\"},{\"name\":\"3rd\"},{\"name\":\"Crew\"},{\"name\":\"Female\"},{\"name\":\"Male\"},{\"name\":\"Adult\"},{\"name\":\"Child\"},{\"name\":\"No\"},{\"name\":\"Yes\"}],\"links\":[{\"source\":\"1st\",\"target\":\"Female\",\"value\":\" 145\"},{\"source\":\"1st\",\"target\":\"Male\",\"value\":\" 180\"},{\"source\":\"2nd\",\"target\":\"Female\",\"value\":\" 106\"},{\"source\":\"2nd\",\"target\":\"Male\",\"value\":\" 179\"},{\"source\":\"3rd\",\"target\":\"Female\",\"value\":\" 196\"},{\"source\":\"3rd\",\"target\":\"Male\",\"value\":\" 510\"},{\"source\":\"Crew\",\"target\":\"Female\",\"value\":\"  23\"},{\"source\":\"Crew\",\"target\":\"Male\",\"value\":\" 862\"},{\"source\":\"Female\",\"target\":\"Adult\",\"value\":\" 425\"},{\"source\":\"Female\",\"target\":\"Child\",\"value\":\"  45\"},{\"source\":\"Male\",\"target\":\"Adult\",\"value\":\"1667\"},{\"source\":\"Male\",\"target\":\"Child\",\"value\":\"  64\"},{\"source\":\"Adult\",\"target\":\"No\",\"value\":\"1438\"},{\"source\":\"Adult\",\"target\":\"Yes\",\"value\":\" 654\"},{\"source\":\"Child\",\"target\":\"No\",\"value\":\"  52\"},{\"source\":\"Child\",\"target\":\"Yes\",\"value\":\"  57\"}]}],\"title\":[{\"text\":\"Titanic: Who lived, and who didn't?\"}],\"tooltip\":{\"trigger\":\"item\"}},\"dispose\":true},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nThe process with `echarts4r` is quite different, since the data\nstructure used by this package is different:\n\n-   The `echarts4r` package needs to have `source` and `target` columns\n    for *axes*, along with a `value` to determine the *width* of the\n    alluvium.Â \n-   The names in the source and target **can repeat, and can appear in\n    both source and target columns** in order to create a multi-axis\n    diagram. Hence the data needs to be inherently in **long** form.\n-   However, for the **values**, we need to manually calculate the\n    aggregate totals for alluvia between each consecutive pairs of axes\n    (i.e Qual variables). This is not done automatically in `echarts4r`,\n    but it is with `ggalluvial`.\n-   So we create *grouped* aggregate *summaries* for each pair of\n    Qualitative variables that we wish to plot *consecutively* ( i.e as\n    axis1, axis2...)\n-   Stack these pair-wise alluvia totals into one combo data frame using\n    `rbind()`, after renaming the variables to \"source\", \"target\" and\n    \"value\".\n\nPhew! seems like too much work to do...I wonder if good, old-fashioned\n`pivot-longer` will get us here...\n:::\n\n## {{< iconify icon-park-outline chart-histogram >}} Chord Diagram\n\n![](images/chord.png){fig-align=\"center\"}\n\nWe will explore this diagram when we explore network graphs with the\n`tidygraph` and `ggraph` packages.\n\n## {{< iconify fluent-mdl2 decision-solid >}} Conclusion\n\nWe see that we can visualize \"evolutions\" over time and space. The\nevolutions can represent changes in the **quantities** of things, or\ntheir **categorical** affiliations or groups.\n\nWhat business data would you depict in this way? Revenue streams?\nEmployment? Expenditures over time and market? There are many\npossibilities!\n\n## Your Turn\n\n1.  Within the `ggalluvial` package are two datasets, `majors` and\n    `vaccinations`. Plot alluvial charts for both of these.\n2.  Go to the [American Life Panel\n    Website](https://alpdata.rand.org/index.php?page=data) where you\n    will find many public datasets. Try to take one and make charts from\n    it that we have learned in this Module.\n\n## {{< iconify ooui references-ltr >}} References\n\n::: {#refs style=\"font-size: 60%;\"}\n\\\nGlobal Migration, <https://download.gsb.bund.de/BIB/global_flow/> A\n    good example of the use of a Chord Diagram.\\\n`ggalluvial` cheatsheet,<https://cheatography.com/seleven/cheat-sheets/ggalluvial/>\\\nJohn Coene, Sankey plots with `echarts4r`,\n<https://echarts4r.john-coene.com/articles/chart_types.html#sankey>\\\nOther packages: [Sankey plot \\| the R Graph Gallery (r-graph-gallery.com)](https://r-graph-gallery.com/sankey-diagram.html)\\\nAnother package: [Sankey diagrams in ggplot2 with ggsankey \\| RCHARTS\n    (r-charts.com)](https://r-charts.com/flow/sankey-diagram-ggplot2/)\\\nSankey Charts using networkD3:\n    <http://christophergandrud.github.io/networkD3>\\\n\n\n\n::: {.cell hash='evol-flow_cache/html/unnamed-chunk-9_b8d5f68c1e52a2c6841726d74946d87c'}\n::: {.cell-output-display}\nPackage      Version     Citation   \n-----------  ----------  -----------\necharts4r    0.4.5       @echarts4r \nggalluvial   0.12.5      @          \nggsankey     0.0.99999   @ggsankey  \nggstream     0.1.0       @ggstream  \nnetworkD3    0.4         @networkD3\n:::\n:::\n\n:::\n\n[^1]: D3 JavaScript Network Graphs from R:\n    [christophergandrud.github.io/networkD3/](http://christophergandrud.github.io/networkD3/)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../../../../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../../../../../../site_libs/echarts4r-4.8.0/echarts-en.min.js\"></script>\r\n<script src=\"../../../../../../site_libs/echarts4r-4.8.0/ecStat.min.js\"></script>\r\n<script src=\"../../../../../../site_libs/echarts4r-4.8.0/dataTool.min.js\"></script>\r\n<script src=\"../../../../../../site_libs/echarts4r-binding-0.4.5/echarts4r.js\"></script>\r\n<link href=\"../../../../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../../../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}